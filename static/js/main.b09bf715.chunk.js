(this.webpackJsonpclone=this.webpackJsonpclone||[]).push([[0],{28:function(e,t,n){},29:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(22),i=n.n(c),s=(n(28),n(29),n(4)),o=n(17),u=n(2),l=n(8),d=n.n(l),f=n(15),h=n(12),j=n(0);function b(){var e=Object(u.f)();return Object(j.jsxs)("li",{id:"Return",onClick:function(){e.push("/battleship/")},children:[Object(j.jsx)("i",{className:"fas fa-arrow-circle-left"}),"Return to Menu"]})}var p=n(9),m=function(e,t){var n="safe",a=t,r=function(){return 0===a?n="sunk":null};return{getName:function(){return e},getHealth:function(){return a},getCurrentState:function(){return n},hit:function(){a-=1,n="hit",r()},isSunk:r}};function v(e){var t=e,n=e,a=[["Carrier",5],["Battleship",4],["Cruiser",3],["Submariner",3],["Destroyer",2]],r={x:-15,y:-15},c=function(e,t){for(var n=[],a=0;a<e;a++){for(var r=[],c=0;c<t;c++){var i=[];i.push("".concat(String.fromCharCode(65+a)).concat(c+1),0),r.push(i)}n.push(r)}return n}(t,n),i=function(t){var n=e-t;return Math.floor(Math.random()*n)+1},s=[];function o(e,t){this.x=e,this.y=t}var u=[],l=function e(t,n){for(var a=[],r=i(t),c=Math.floor(Math.random()*n),s=Math.round(Math.random()),u=function(e){return e>.5?0:1}(s),l=0;l<t;l++){var d=[r+l,c];a.push(new o(d[s],d[u]))}return!0===h(r,c,t,s)?e(t,n):a},d=function(){for(var e=[],n=0;n<a.length;n++){var r=a[n][0],c=a[n][1],i=l(c,t);s.push.apply(s,Object(p.a)(i));var o=m(r,c);e.push({ship:o,pos:i})}return e},h=function(e,t,n,a){return 0!==s.length&&s.some((function(r){return 0===a?r.x>=e&&r.x<=e+n&&r.y===t:r.y>=e&&r.y<=e+n&&r.x===t}))},j=d(),b=j.length,v=function(e){"sunk"===e.ship.getCurrentState()&&(b-=1)},g=function(e,t,n){var a,r=Object(f.a)(n);try{for(r.s();!(a=r.n()).done;){var c,i=a.value,o=Object(f.a)(i.pos);try{for(o.s();!(c=o.n()).done;){var u=c.value;if(u.x===e&&u.y===t)return i.ship.hit(),v(i),O(s,e,t),!1}}catch(l){o.e(l)}finally{o.f()}}}catch(l){r.e(l)}finally{r.f()}return!0},O=function(e,t,n){e.forEach((function(a,c){if(a.x===t&&a.y===n){var i,s=e.splice(c,1);return console.log(s),r=s[0],(i=[]).concat.apply(i,Object(p.a)(s))}}))};return{height:t,width:n,randomNumGen:i,shipsOnTheBoard:j,addShipsToTheBoard:d,board:c,resetArray:function(e){for(;e.length>0;)e.pop()},resetBoard:function(){c.map((function(e){e.map((function(e){e[1]=0}))}))},missedAtks:u,recentAtk:null,currentTotalShips:b,validateCoordinates:h,receiveAttack:function(e,n,a){e>t&&n>t||(c[e][n][1]||(c[e][n][1]=1-c[e][n][1],!0===g(e,n,a)&&u.push({x:e,y:n})))},isShipGotHit:g,occupiedPos:s,getRecentCoordinate:function(){return r},getOccupiedPos:function(){return s},getCurrentTotalShips:function(){return b}}}function g(e,t,n,a){var r=e,c=t,i=c?"Player":"AI",s=n,o=v(a),u=function(e){for(var t=[],n=0;n<e;n++)for(var a=0;a<e;a++)t.push([n,a]);return t},l=u(a);return{gameboard:o,turn:r,togglePlayerTurn:function(e){return!e},aiMove:function(e){var t,a=o.getOccupiedPos().length,r=o.getCurrentTotalShips();if(console.log(n),1==s&&0!==e.length){var c,i=e.splice((t=e.length-1,Math.floor(Math.random()*t)),1);return(c=[]).concat.apply(c,Object(p.a)(i))}if(2==s&&0!==e.length){var u=[0,-1],l=[0,1],d=[1,0],f=[-1,0],h=[u,l,d,f];return 0===h.length&&(h=h=[u,l,d,f]),function(e,t,n,a,r){var c,i=4!==r.length?e.recentAtk:a.splice(Math.floor(Math.random()*a.length)-1,1),s=e.getOccupiedPos().length,o=e.getCurrentTotalShips(),u=0;console.log(i);var l=Math.floor(Math.random()*r.length-1)+1,d=r.splice(l,1);if(t!==s&&n===o||4!==r.length){var f,h;return console.log("yes"),1===(u+=1)&&(e.recentAtk=(h=[]).concat.apply(h,Object(p.a)(i))),console.log(i),i[0]+=d[0],i[1]+=d[1],console.log(i),(f=[]).concat.apply(f,Object(p.a)(i))}return(c=[]).concat.apply(c,Object(p.a)(i))}(o,a,r,e,h)}},aiLegalAtks:l,selectedAtk:function(e,t){return[e,t]},isWinner:!1,isHuman:c,displayName:i,toggleLegality:function(e,t){var n=l.findIndex((function(n){return n[0]===e&n[1]===t}));l.splice(n,1)},refillLegalAtks:function(){return u(a)}}}var O=10,x=g(!0,!0,1,O),y=g(!1,!1,1,O);function k(){return(k=Object(h.a)(d.a.mark((function e(t,n,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:0==t?(x=g(!0,!0,null,O),y=g(!1,!0,null,O)):1==t?(x=g(!0,!0,null,O),y=g(!1,!1,a,O)):(x=g(!0,!1,n,O),y=g(!1,!1,a,O)),S(x,y);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var N=function(e,t){e.turn=e.togglePlayerTurn(e.turn),t.turn=t.togglePlayerTurn(t.turn)},S=function(e,t){!0===e.isHuman&&!0===t.isHuman?(e.displayName="Player 1",t.displayName="Player 2"):!1===e.isHuman&&!1===t.isHuman?(e.displayName="AI 1",t.displayName="AI 2"):(e.displayName="Player",t.displayName="AI")},A=function(e,t){0==e.gameboard.getOccupiedPos().length?t.isWinner=!0:0==t.gameboard.getOccupiedPos().length&&(e.isWinner=!0)},C=function(e,t){if(e.turn){var n=e.aiMove(e.aiLegalAtks),a=t.gameboard.shipsOnTheBoard;t.gameboard.receiveAttack(n[0],n[1],a)}else if(t.turn){var r=t.aiMove(t.aiLegalAtks),c=e.gameboard.shipsOnTheBoard;e.gameboard.receiveAttack(r[0],r[1],c)}A(e,t),N(e,t)},w=function(e){var t=e.gameboard;t.resetArray(t.occupiedPos),t.shipsOnTheBoard=t.addShipsToTheBoard()},P=function(e){w(e),e.isWinner&&(e.isWinner=!1),e.gameboard.resetBoard(),e.aiLegalAtks=e.refillLegalAtks()};function T(e){var t=e.gamemode,n=(e.difficulty,window.innerWidth),r=Object(a.useState)(x),c=Object(s.a)(r,1)[0],i=Object(a.useState)(y),o=Object(s.a)(i,1)[0],u=Object(a.useState)(null),l=Object(s.a)(u,2),p=l[0],m=l[1],v=Object(a.useState)(!1),g=Object(s.a)(v,2),O=g[0],k=g[1],S=Object(a.useState)([x.turn,x.isHuman]),T=Object(s.a)(S,2),M=T[0],B=T[1],H=Object(a.useState)(0),I=Object(s.a)(H,2),E=I[0],R=I[1],L=n>=800?.22*n:.3*n,W=Object(a.useRef)(null),D=Object(a.useRef)(null),G=Object(a.useState)(!0),z=Object(s.a)(G,2),J=z[0],V=z[1],q=Object(a.useState)(!0),X=Object(s.a)(q,2),Y=X[0],F=X[1],K=function(){O||0!==t.value||(V(!1),F(!1)),O||(k(!O),U())};function Q(){return new Promise((function(e){setTimeout((function(){P(c),P(o),e("resolved")}),200)}))}var U=function(){k(!O),m(!1),B([c.turn,c.isHuman])};function Z(){return $.apply(this,arguments)}function $(){return($=Object(h.a)(d.a.mark((function e(){var t,n,a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=W.current,n=D.current,a=t.getContext("2d"),r=n.getContext("2d"),!O){e.next=13;break}return e.next=7,Q();case 7:B([c.turn,c.isHuman]),ae(a,L,c),ae(r,L,o),console.log(M),U(),console.log(M);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _=function(e){var t=W.current,n=D.current,a=t.getContext("2d"),r=n.getContext("2d");"randomize-p1"===e.target.id?(w(c),ae(a,L,c)):(w(o),ae(r,L,o))},ee=function(e){e.target.id.includes("p1")?V(!J):F(!Y)},te=function(e,t,n,a){n.fillStyle="rgb(7,67,114)",n.fillRect(e*a,t*a,a,a),n.strokeStyle="rgba(7,100,176,0.3)",n.strokeRect(e*a,t*a,a,a),n.lineWidth=1},ne=function(e,t,n,a,r,c){n.fillStyle="rgb(224,224,224)",n.strokeStyle="rgb(34,34,34)";for(var i=0;i<r;i++)0===c?n.fillRect(e*a,t*a,a,a*r):n.fillRect(e*a,t*a,a*r,a);0===c?n.strokeRect(e*a,t*a,a,a*r):n.strokeRect(e*a,t*a,a*r,a)},ae=function(e,t,n){var a=.1*t,r=n.gameboard.shipsOnTheBoard,c=n.gameboard.getOccupiedPos(),i=n.gameboard.board;e.clearRect(0,0,a,a),i.forEach((function(t,i){t.forEach((function(t,s){(J||!0!==n.turn)&&(Y||!1!==n.turn)&&n.isHuman&&1==c.filter((function(e){return e.x===i&&e.y===s})).length?re(r,s,i,e,a):te(s,i,e,a)}))}))},re=function(e,t,n,a,r){var c,i=Object(f.a)(e);try{for(i.s();!(c=i.n()).done;){var s=c.value;s.pos[0].x===n&&s.pos[0].y===t&&(s.pos[0].x===n&&s.pos[1].x===n?ne(t,n,a,r,s.pos.length,1):ne(t,n,a,r,s.pos.length,0))}}catch(o){i.e(o)}finally{i.f()}},ce=function(e,t,n){var a=.1*t,r=n.gameboard.board,c=n.gameboard.getRecentCoordinate();r.forEach((function(t,n){t.forEach((function(t,r){1===t[1]&&(c.x===n&&c.y===r?(ie(r+1,n+1,e,a,!0),se(r+1,n+1,e,a,!0)):(ie(r+1,n+1,e,a,!1),se(r+1,n+1,e,a,!1)),t[1]=2)}))}))},ie=function(e,t,n,a,r){n.beginPath(),n.lineWidth=2,n.moveTo(e*a-a*(3/4),t*a-a*(3/4)),n.lineTo(e*a-a/4,t*a-a/4),n.moveTo(e*a-a/4,t*a-a*(3/4)),n.lineTo(e*a-a*(3/4),t*a-a/4),n.strokeStyle=oe(r),n.stroke()},se=function(e,t,n,a,r){var c=e*a-a+a/2,i=t*a-a+a/2,s=Math.PI+Math.PI*e/2;n.beginPath(),n.lineWidth=2,n.arc(c,i,a/3,0,s),n.strokeStyle=oe(r),n.stroke()},oe=function(e){return e?"red":"rgb(77,166,215)"},ue=function(e,t,n,a){return Object(j.jsxs)("div",{className:"base-container",children:["cv1"===n&&null!==a?le(a):null,Object(j.jsxs)("div",{className:"canvas-container",children:[Object(j.jsx)("canvas",{ref:e,className:"cv",id:n,width:"".concat(t,"px"),height:"".concat(t,"px")}),!O&&a.isHuman?de(n):null]}),"cv2"===n&&null!==a?le(a):null]})},le=function(e){var t=e.gameboard.getCurrentTotalShips(),n=e.gameboard.getOccupiedPos().length;return Object(j.jsxs)("div",{className:"player-resource-container",children:[Object(j.jsx)("p",{children:e.displayName}),Object(j.jsxs)("div",{className:"player-resources",children:[Object(j.jsx)("i",{className:"fas fa-ship"}),Object(j.jsxs)("p",{children:[t,"/5"]})]}),Object(j.jsxs)("div",{className:"player-resources",children:[Object(j.jsx)("i",{className:"fas fa-splotch"}),Object(j.jsxs)("p",{children:[n,"/17"]})]})]})},de=function(e){return Object(j.jsx)("div",{className:"button-container",children:Object(j.jsxs)("div",{id:"p1-bottom-side",children:[Object(j.jsx)("button",{className:"in-game-btn",id:"cv1"===e?"randomize-p1":"randomize-p2",onClick:_,children:"Randomize"}),Object(j.jsx)("button",{className:"in-game-btn",id:"cv1"===e?"tglVsb-p1":"tglVsb-p2",onClick:ee,children:"Toggle visibility"})]})})};return Object(a.useEffect)((function(){var e=W.current,t=D.current,n=e.getContext("2d"),a=t.getContext("2d");ae(n,L,c),ae(a,L,o)}),[J,Y]),Object(a.useEffect)((function(){var e=W.current,t=D.current,n=e.getContext("2d"),a=t.getContext("2d"),r=.1*L,i=function(e,t,n,a){var c=n.getBoundingClientRect(),i=a.clientX-c.left,s=a.clientY-c.top;return function(e,t,n,a){if(!e.aiLegalAtks.some((function(e){return e[0]===n&&e[1]===a})))return!0;var r=t.gameboard.shipsOnTheBoard;return e.toggleLegality(n,a),t.gameboard.receiveAttack(a,n,r),A(x,y),N(x,y),!1}(e,t,Math.round((i-r/2)/r),Math.round((s-r/2)/r))},s=function(e,t,n,a){e.turn&&O&&n.addEventListener("mousedown",(function r(c){if(i(e,t,n,c))return R(E+1),n.removeEventListener("mousedown",r);ce(a,L,t),B([t.turn,t.isHuman]),n.removeEventListener("mousedown",r)}))},u=function(){s(c,o,t,a),s(o,c,e,n)},l=function(){if(c.turn)return C(c,o),ce(a,L,o),void B([o.turn,o.isHuman]);o.turn&&(C(c,o),ce(n,L,c),B([c.turn,c.isHuman]))};function f(e){return j.apply(this,arguments)}function j(){return(j=Object(h.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return setTimeout((function(){l()}),t),e.abrupt("return");case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(){return(b=Object(h.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c.isWinner&&!o.isWinner){e.next=3;break}return m(!0),e.abrupt("return");case 3:if(M[1]||!M[0]){e.next=6;break}return e.next=6,f(50);case 6:return M[1]&&M[0]&&u(),e.abrupt("return");case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return O&&!p&&function(){b.apply(this,arguments)}(),console.log(O,"Is current player human: "+M[1]),function(){clearTimeout(f)}}),[M,O,E]),Object(j.jsxs)("div",{id:"Battle",children:[Object(j.jsxs)("div",{id:"upper-container",children:[Object(j.jsx)(b,{}),Object(j.jsxs)("div",{id:"upper-button-container",children:[Object(j.jsx)("button",{onClick:O?Z:K,children:O?Object(j.jsx)("i",{className:"fas fa-redo-alt"}):Object(j.jsx)("i",{className:"fas fa-play"})}),Object(j.jsx)("button",{children:Object(j.jsx)("i",{className:"fas fa-eye"})})]})]}),Object(j.jsx)("div",{id:"instructions-parent-container",children:Object(j.jsx)("div",{id:"instructions-wrapper",children:p?Object(j.jsx)("h2",{children:"Game ended"}):(c.isHuman||o.isHuman)&&O?Object(j.jsx)("h2",{children:"Destroy the enemy's ships"}):!c.isHuman&&!o.isHuman||O?2!=t.value||O?Object(j.jsx)("h2",{children:"Get some popcorn"}):Object(j.jsx)("h2",{children:"Start the battle"}):Object(j.jsx)("h2",{children:"Place the ships"})})}),Object(j.jsxs)("div",{id:"main-battle",children:[ue(W,L,"cv1",c),null!==c||null!==o?p?Object(j.jsx)("p",{className:"display-victory",children:c.isWinner?"".concat(c.displayName," wins!!"):"".concat(o.displayName," wins!!")}):Object(j.jsx)("p",{className:"display-turn",children:c.turn?"".concat(c.displayName," turn"):"".concat(o.displayName," turn")}):null,ue(D,L,"cv2",o)]})]})}function M(){return Object(j.jsxs)("div",{id:"Themes",children:[Object(j.jsx)(b,{}),Object(j.jsx)("h1",{className:"title",children:"Select themes: "})]})}var B=n(16);function H(e){var t=e.setGamemode,n=e.gamemode,a=e.difficulty,r=e.setDifficulty,c=function(e){e.target.id.includes(2)||1==n.value?r(Object(B.a)(Object(B.a)({},a),{},{value:e.target.value,valB:e.target.value})):r(Object(B.a)(Object(B.a)({},a),{},{value:e.target.value,valA:e.target.value}))};return Object(j.jsxs)("div",{id:"Settings",children:[Object(j.jsx)("div",{className:"custom-select",children:Object(j.jsxs)("select",{name:"gamemodes",value:n.value,onChange:function(e){t({value:e.target.value})},children:[Object(j.jsx)("option",{value:"0",children:"PvP"}),Object(j.jsx)("option",{value:"1",children:"PvAI"}),Object(j.jsx)("option",{value:"2",children:"AIvAI"})]})}),2==n.value?Object(j.jsx)(I,{gamemode:n,difficulty:a,id:1,handleDifficultyChange:c}):null,0!=n.value?Object(j.jsx)(I,{gamemode:n,difficulty:a,id:2,handleDifficultyChange:c}):null]})}var I=function(e){var t=e.gamemode,n=e.difficulty,a=e.id,r=e.handleDifficultyChange;return Object(j.jsx)("div",{className:"custom-select",id:"ai-diff".concat(a),children:Object(j.jsxs)("select",{name:"diff",value:n.value,onChange:r,children:[Object(j.jsx)("option",{value:"1",children:1==t.value||1==a?"AI: Easy":"AI 2: Easy"}),Object(j.jsx)("option",{value:"2",children:1==t.value||1==a?"AI: Hard":"AI 2: Hard"})]})})};function E(){var e=Object(a.useState)({value:"0"}),t=Object(s.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)({value:"1",valA:"1",valB:"1"}),i=Object(s.a)(c,2),u=i[0],l=i[1],d=Object(a.useState)(null),f=Object(s.a)(d,2),h=f[0],b=f[1],p=Object(a.useState)(null),m=Object(s.a)(p,2),v=m[0],g=m[1];return Object(j.jsx)(o.a,{children:Object(j.jsx)(R,{gamemode:n,setGamemode:r,difficulty:u,setDifficulty:l,mark:h,setMark:b,piece:v,setPiece:g})})}function R(e){var t=e.gamemode,n=e.setGamemode,a=e.difficulty,r=e.setDifficulty,c=e.setMark,i=e.setPiece;return Object(j.jsxs)(u.c,{children:[Object(j.jsx)(u.a,{exact:!0,path:"/battleship/",children:Object(j.jsx)(L,{setGamemode:n,gamemode:t,difficulty:a,setDifficulty:r})}),Object(j.jsx)(u.a,{exact:!0,path:"/battleship/battle",children:Object(j.jsx)(T,{gamemode:t,difficulty:a})}),Object(j.jsx)(u.a,{exact:!0,path:"/battleship/themes",children:Object(j.jsx)(M,{setMark:c,setPiece:i})})]})}function L(e){var t=e.setGamemode,n=e.gamemode,r=e.difficulty,c=e.setDifficulty;return Object(a.useEffect)((function(){document.getElementById("prf").onclick=function(){window.location.href="https://github.com/law911012eqw"}})),Object(a.useEffect)((function(){!function(e,t){!function(e,t,n){k.apply(this,arguments)}(parseInt(e.value),parseInt(t.valA),parseInt(t.valB))}(n,r)}),[n,r]),Object(j.jsxs)("div",{id:"menu",children:[Object(j.jsxs)("div",{className:"title-wrapper",children:[Object(j.jsx)("h1",{id:"title",className:"title",children:"Battleship"}),Object(j.jsxs)("div",{className:"author-wrapper",children:[Object(j.jsx)("h2",{className:"divider",children:" | "}),Object(j.jsx)("h5",{className:"author",children:"Created by B.B Ant"}),Object(j.jsx)("div",{className:"frame",children:Object(j.jsx)("img",{id:"prf",className:"prof",src:"https://avatars.githubusercontent.com/u/73290979?s=400&u=2df2e8360dbecaf0265e22194b52647c95ea6e06&v=4",alt:"profile"})})]})]}),Object(j.jsx)("nav",{id:"nav-menu",children:Object(j.jsx)("ul",{children:Object(j.jsx)("div",{children:Object(j.jsx)("li",{children:Object(j.jsx)(o.b,{to:"/battleship/battle",children:"Start Game"})})})})}),Object(j.jsx)(H,{setGamemode:t,gamemode:n,difficulty:r,setDifficulty:c})]})}var W=function(){return Object(j.jsx)("div",{className:"App",children:Object(j.jsx)(E,{})})};i.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(W,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.b09bf715.chunk.js.map